package impl;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;

public class MainFrame extends JFrame {
    private boolean initialized = false;
    private Actions actions = new Actions();
    // JPanel
    JPanel pnlButton = new JPanel();
    JPanel pnlName = new JPanel();
    // Buttons
    JButton userBtn = new JButton("Create User");
    //TextArea
    JTextArea nameInput = new JTextArea("Insert Name");
    //Label
    JLabel currentStatus = new JLabel("Test");
    //JToggle
    JToggleButton toggle = new JToggleButton();
    String username;
    User currentUser;
    
    public void initialize() {
        initializeGui();
        initializeEvents();
        this.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    }
    
    private void initializeGui() {
        if (initialized)
            return;
        initialized = true;
        
        userBtn.setBounds(60, 400, 220, 30);
    	pnlButton.setBounds(800, 800, 200, 100);
    	pnlButton.add(userBtn);
    	this.add(pnlButton);
    	
    	pnlName.setBounds(60,300,220,30);
    	nameInput.setBounds(600, 800, 400, 100);
    	pnlName.add(nameInput);
    	this.add(pnlName);
        
    	//Initialise the bits that aren't showing yet
    	
    	currentStatus.setBounds(MAXIMIZED_BOTH, MAXIMIZED_BOTH, WIDTH, HEIGHT);
    	
    	
        this.setSize(500, 400);
        this.setTitle("House Management System");
        Dimension windowSize = this.getSize();
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        this.setLocation(screenSize.width/2 - windowSize.width/2, screenSize.height/2 - windowSize.height/2);
        Container pane = this.getContentPane();
        pane.setLayout(new GridBagLayout());
        // TODO: Add UI widgets
    }
    
    private void initializeEvents() {
    	userBtn.addMouseListener(new MouseAdapter(){
        	@Override
        	public void mousePressed(MouseEvent e){
        		System.out.println("Clicked");
        		currentUser = new User();
        		username = nameInput.getText();
        		removeEntranceScreen();
        	}
        });
    	
        // TODO: Add action listeners, etc
    }
    
    public class Actions implements ActionListener {
		public void actionPerformed(ActionEvent e) {
            String command = e.getActionCommand();
            command = command == null ? "" : command;
            // TODO: add if...if else... for action commands
        
        }
    }
    
    public void removeEntranceScreen(){
    	pnlButton.setVisible(false); //get rid of initial screen
		pnlName.setVisible(false); //get rid of initial screen
		toggle.setBounds(100,100, 10, 10);
		this.add(toggle);
		currentStatus.setText(currentUser.getHouseStatus());
		this.add(currentStatus);
		this.setTitle(username + "'s House");
    }
    public void updateStatus(){
    	currentStatus.setText(currentUser.getHouseStatus());
    }

    public void dispose() {
        // TODO: Save settings
        //super.dispose();
        System.exit(0);
    }
    
    public void setVisible(boolean b) {
        initialize();
        super.setVisible(b);
    }
}
